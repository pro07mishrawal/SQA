<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Kaun Banega Crorepati</title>
  <style>
    /* [Same CSS as before] */
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #0b1f3a;
      color: #ffffff;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      height: 100vh;
    }

    .container {
      background-color: #152d53;
      padding: 20px;
      border-radius: 10px;
      width: 700px;
      margin: 20px;
    }

    h1 {
      text-align: center;
      font-size: 2em;
      color: gold;
      margin-bottom: 10px;
    }

    #question {
      font-size: 1.4em;
      margin: 20px 0;
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .option-btn {
      padding: 12px;
      background-color: #007bff;
      border: none;
      border-radius: 5px;
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
      font-size: 1.1em;
      text-align: left;
    }

    .option-btn:hover {
      background-color: #0056b3;
    }

    .option-btn.correct {
      background-color: #28a745 !important;
    }

    .option-btn.incorrect {
      background-color: #dc3545 !important;
    }

    .option-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    #lock-msg {
      text-align: center;
      margin-top: 10px;
      font-style: italic;
      color: gold;
    }

    #result {
      text-align: center;
      margin-top: 20px;
      font-size: 1.2em;
    }

    #timer {
      text-align: center;
      font-size: 1.1em;
    }

    .sidebar {
      background-color: #0a2238;
      padding: 20px;
      border-radius: 10px;
      color: gold;
      height: fit-content;
    }

    .sidebar h3 {
      margin-bottom: 10px;
    }

    .level {
      padding: 4px 0;
      border-bottom: 1px solid #ffffff22;
    }

    .active-level {
      background-color: gold;
      color: black;
      font-weight: bold;
    }

    .team {
      margin-top: 20px;
      color: #ccc;
      font-size: 0.9em;
    }

    .game-area {
      display: flex;
      gap: 20px;
    }
  </style>
</head>
<body>
  <div class="game-area">
    <div class="container">
      <h1>ü™ô Kaun Banega Crorepati ü™ô</h1>
      <div id="timer">‚è≥ Time left: 20s</div>
      <div id="question">Loading question...</div>
      <div class="options" id="options"></div>
      <div id="lock-msg"></div>
      <div id="result"></div>
    </div>

    <div class="sidebar">
      <h3>üèÜ Prize Levels</h3>
      <div id="prize-levels"></div>
      <div class="team">
        <p>Created by:</p>
        <p>Promish Rawal<br>Sandesh GC<br>Subodh Karki<br>Saurav Thapa<br>Aaryan Bohora</p>
      </div>
    </div>
  </div>

  <script>
    const questions = [
      { question: "What is the capital of Nepal?", options: ["Pokhara", "Biratnagar", "Kathmandu", "Lalitpur"], answer: 2 },
      { question: "Which planet is known as the Red Planet?", options: ["Earth", "Venus", "Mars", "Jupiter"], answer: 2 },
      { question: "What is 12 x 8?", options: ["96", "84", "108", "112"], answer: 0 },
    ];

    const prizeLevels = [
      2500000, 1250000, 640000, 320000, 160000,
      80000, 40000, 20000, 10000, 5000,
      2000, 1000
    ]; // reversed

    let currentQuestion = 0;
    let currentPrize = 0;
    let timeLeft = 20;
    let timer;
    let recognizing = false;

    const questionEl = document.getElementById("question");
    const optionsEl = document.getElementById("options");
    const resultEl = document.getElementById("result");
    const lockMsgEl = document.getElementById("lock-msg");
    const timerEl = document.getElementById("timer");
    const prizeLevelsEl = document.getElementById("prize-levels");

    let recognition;

    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      recognition = new SpeechRecognition();
      recognition.continuous = false;
      recognition.interimResults = false;
      recognition.lang = 'en-US';

      recognition.onresult = function(event) {
        const transcript = event.results[0][0].transcript.trim().toUpperCase();
        const letter = transcript[0];
        const index = letter.charCodeAt(0) - 65;
        if (index >= 0 && index <= 3) {
          lockMsgEl.textContent = `üîí Computer ji, option ${letter} ko lock kiya jaye...`;
          disableButtons();
          setTimeout(() => lockAnswer(index), 2000);
        }
      };

      recognition.onerror = function(event) {
        console.error("Speech recognition error:", event.error);
      };
    } else {
      alert("Sorry, your browser does not support voice recognition.");
    }

    function startTimer() {
      timeLeft = 20;
      timerEl.textContent = `‚è≥ Time left: ${timeLeft}s`;
      clearInterval(timer);
      timer = setInterval(() => {
        timeLeft--;
        timerEl.textContent = `‚è≥ Time left: ${timeLeft}s`;
        if (timeLeft <= 0) {
          clearInterval(timer);
          lockAnswer(-1);
        }
      }, 1000);
    }

    function loadQuestion() {
      const q = questions[currentQuestion];
      questionEl.textContent = q.question;
      optionsEl.innerHTML = "";
      lockMsgEl.textContent = "";
      resultEl.textContent = "";

      q.options.forEach((opt, i) => {
        const btn = document.createElement("button");
        btn.className = "option-btn";
        btn.textContent = `${String.fromCharCode(65 + i)}. ${opt}`;
        btn.disabled = true;
        optionsEl.appendChild(btn);
      });

      updatePrizeLevels();
      startTimer();
      startListening();
    }

    function startListening() {
      if (recognition) {
        recognition.start();
        recognizing = true;
      }
    }

    function stopListening() {
      if (recognition && recognizing) {
        recognition.stop();
        recognizing = false;
      }
    }

    function lockAnswer(index) {
      stopListening();
      clearInterval(timer);
      const correct = questions[currentQuestion].answer;
      const buttons = document.querySelectorAll(".option-btn");

      buttons.forEach((btn, i) => {
        if (i === correct) btn.classList.add("correct");
        if (i === index && index !== correct) btn.classList.add("incorrect");
      });

      if (index === correct) {
        currentPrize = prizeLevels[11 - currentQuestion];
        resultEl.textContent = `‚úÖ Correct! You won ‚Çπ${currentPrize}`;
        currentQuestion++;
        if (currentQuestion < questions.length) {
          setTimeout(loadQuestion, 3000);
        } else {
          resultEl.textContent = `üèÜ Congratulations! You are a Crorepati! Total: ‚Çπ${currentPrize}`;
        }
      } else {
        if (index === -1) {
          resultEl.textContent = "‚è∞ Time's up!";
        } else {
          resultEl.textContent = `‚ùå Wrong answer! Correct: ${questions[currentQuestion].options[correct]}`;
        }
      }
    }

    function disableButtons() {
      document.querySelectorAll(".option-btn").forEach(btn => btn.disabled = true);
    }

    function updatePrizeLevels() {
      prizeLevelsEl.innerHTML = "";
      prizeLevels.forEach((amt, i) => {
        const index = 11 - i;
        const div = document.createElement("div");
        div.className = "level" + (index === currentQuestion ? " active-level" : "");
        div.textContent = `Level ${index + 1}: ‚Çπ${amt}`;
        prizeLevelsEl.appendChild(div);
      });
    }

    loadQuestion();
  </script>
</body>
</html>
